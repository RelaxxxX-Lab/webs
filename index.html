<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lua - ServerSide Executor</title>
    <style>
        :root {
            --primary: #6e45e2;
            --secondary: #88d3ce;
            --dark: #101010;
            --darker: #0a0a0a;
            --light: #f0f0f0;
            --gray: #1a1a1a;
            --sidebar-width: 250px;
            --accent: #101010;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: var(--darker);
            color: var(--light);
            display: flex;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Sidebar Styles */
        .sidebar {
            width: var(--sidebar-width);
            background: var(--dark);
            padding: 20px 0;
            height: 100vh;
            position: fixed;
            box-shadow: 5px 0 15px rgba(0, 0, 0, 0.3);
            z-index: 100;
            border-right: 1px solid rgba(255, 255, 255, 0.05);
        }

        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 30px;
            padding: 0 20px;
        }

        .logo h1 {
            font-size: 28px;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            font-weight: 700;
        }

        .logo-icon {
            margin-right: 10px;
            font-size: 24px;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .nav-menu {
            list-style: none;
        }

        .nav-item {
            margin: 5px 0;
            position: relative;
        }

        .nav-item.active::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            width: 4px;
            background: linear-gradient(to bottom, var(--primary), var(--secondary));
            border-radius: 0 4px 4px 0;
        }

        .nav-link {
            display: flex;
            align-items: center;
            padding: 12px 20px;
            color: var(--light);
            text-decoration: none;
            font-size: 15px;
            transition: all 0.3s ease;
            border-radius: 4px;
            margin: 0 10px;
        }

        .nav-link:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .nav-link.active {
            background: rgba(110, 69, 226, 0.15);
        }

        .nav-link i {
            margin-right: 12px;
            font-size: 18px;
        }

        /* Main Content Styles */
        .main-content {
            flex: 1;
            margin-left: var(--sidebar-width);
            padding: 30px;
            position: relative;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .page-title h2 {
            font-size: 24px;
            font-weight: 600;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .user-profile {
            display: flex;
            align-items: center;
        }

        .user-profile img {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-right: 10px;
            object-fit: cover;
            border: 2px solid var(--primary);
        }

        /* Executor Container */
        .executor-container {
            background: var(--gray);
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .editor-toolbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .editor-title {
            font-size: 16px;
            font-weight: 500;
        }

        .editor-actions {
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 8px 16px;
            border-radius: 5px;
            border: none;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 14px;
        }

        .btn-primary {
            background: linear-gradient(to right, var(--primary), var(--secondary));
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(110, 69, 226, 0.4);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: var(--light);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .btn-danger {
            background: #e63946;
            color: white;
        }

        .btn-danger:hover {
            background: #d62839;
        }

        .code-editor {
            width: 100%;
            min-height: 200px;
            background: #1e1e1e;
            border-radius: 5px;
            padding: 15px;
            color: #f8f8f2;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 14px;
            line-height: 1.5;
            border: 1px solid rgba(255, 255, 255, 0.1);
            resize: vertical;
            margin-bottom: 15px;
        }

        .output-container {
            background: #1e1e1e;
            border-radius: 5px;
            padding: 15px;
            min-height: 100px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 14px;
            color: #f8f8f2;
            overflow-y: auto;
            max-height: 300px;
        }

        .output-title {
            color: var(--primary);
            margin-bottom: 10px;
            font-weight: 500;
        }

        .output-content {
            white-space: pre-wrap;
        }

        /* Connection Panel */
        .connection-panel {
            background: var(--gray);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .connection-form {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-size: 14px;
            color: rgba(255, 255, 255, 0.8);
        }

        .form-input {
            width: 100%;
            padding: 10px 15px;
            background: #1e1e1e;
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            color: white;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(110, 69, 226, 0.2);
        }

        .connection-status {
            display: flex;
            align-items: center;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid rgba(255, 255, 255, 0.05);
        }

        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
            background: #e63946;
        }

        .status-indicator.connected {
            background: #2a9d8f;
        }

        /* Script Hub */
        .scripts-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }

        .script-card {
            background: var(--gray);
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.05);
            position: relative;
            overflow: hidden;
        }

        .script-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        .script-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(110, 69, 226, 0.2);
            color: var(--primary);
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
        }

        .script-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--light);
        }

        .script-desc {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 15px;
            line-height: 1.5;
        }

        .script-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .script-author {
            display: flex;
            align-items: center;
            font-size: 12px;
            color: rgba(255, 255, 255, 0.6);
        }

        .script-author img {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            margin-right: 5px;
        }

        /* Whitelist Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: var(--dark);
            border-radius: 10px;
            width: 90%;
            max-width: 500px;
            padding: 25px;
            box-shadow: 0 5px 30px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-title {
            font-size: 20px;
            font-weight: 600;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .close-modal {
            background: none;
            border: none;
            color: rgba(255, 255, 255, 0.6);
            font-size: 24px;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .close-modal:hover {
            color: white;
        }

        .modal-body {
            margin-bottom: 20px;
        }

        .whitelist-info {
            background: var(--gray);
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 15px;
        }

        .whitelist-info p {
            margin-bottom: 8px;
            font-size: 14px;
        }

        .whitelist-info strong {
            color: var(--primary);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .sidebar {
                width: 70px;
                overflow: hidden;
            }
            
            .logo h1, .nav-link span {
                display: none;
            }
            
            .logo {
                justify-content: center;
            }
            
            .nav-link {
                justify-content: center;
                margin: 0 5px;
            }
            
            .nav-link i {
                margin-right: 0;
                font-size: 20px;
            }
            
            .main-content {
                margin-left: 70px;
                padding: 15px;
            }

            .connection-form {
                grid-template-columns: 1fr;
            }
        }

        /* Tabs */
        .tabs {
            display: flex;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 20px;
        }

        .tab {
            padding: 10px 20px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            color: rgba(255, 255, 255, 0.7);
            border-bottom: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .tab:hover {
            color: white;
        }

        .tab.active {
            color: var(--primary);
            border-bottom: 2px solid var(--primary);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Game Logs */
        .log-entry {
            background: var(--gray);
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 10px;
            border-left: 3px solid var(--primary);
        }

        .log-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
        }

        .log-title {
            font-weight: 600;
            color: var(--primary);
        }

        .log-time {
            color: rgba(255, 255, 255, 0.5);
            font-size: 12px;
        }

        .log-content {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.8);
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <!-- Sidebar -->
    <aside class="sidebar">
        <div class="logo">
            <span class="logo-icon"><i class="fas fa-code"></i></span>
            <h1>Lua</h1>
        </div>
        <ul class="nav-menu">
            <li class="nav-item active">
                <a href="#" class="nav-link active" data-tab="dashboard">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>Dashboard</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="#" class="nav-link" data-tab="game-logs">
                    <i class="fas fa-gamepad"></i>
                    <span>Game Logs</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="#" class="nav-link" data-tab="scripthub">
                    <i class="fas fa-box-open"></i>
                    <span>Scripthub</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="#" class="nav-link" data-tab="executor">
                    <i class="fas fa-terminal"></i>
                    <span>Executor</span>
                </a>
            </li>
        </ul>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <div class="header">
            <div class="page-title">
                <h2>Dashboard</h2>
            </div>
            <div class="user-profile">
                <img src="https://cdn.discordapp.com/avatars/1207688714818429069/a_7c3a5e5e5e5e5e5e5e5e5e5e5e5e5e5?size=1024" alt="User">
                <span id="username-display">Not Connected</span>
            </div>
        </div>

        <!-- Connection Panel -->
        <div class="connection-panel" id="connection-panel">
            <h3 style="margin-bottom: 15px; color: var(--primary);">Server Connection</h3>
            <div class="connection-form">
                <div class="form-group">
                    <label for="username" class="form-label">Username</label>
                    <input type="text" id="username" class="form-input" placeholder="Enter your username">
                </div>
                <div class="form-group">
                    <label for="discord-id" class="form-label">Discord ID</label>
                    <input type="text" id="discord-id" class="form-input" placeholder="Enter your Discord ID">
                </div>
            </div>
            <div class="connection-status">
                <div class="status-indicator" id="status-indicator"></div>
                <span id="status-text">Disconnected</span>
                <button class="btn btn-primary" style="margin-left: auto;" id="connect-btn">
                    <i class="fas fa-plug"></i> Connect
                </button>
                <button class="btn btn-danger" style="display: none;" id="disconnect-btn">
                    <i class="fas fa-power-off"></i> Disconnect
                </button>
            </div>
        </div>

        <!-- Dashboard Tab -->
        <div class="tab-content active" id="dashboard-tab">
            <div class="executor-container">
                <div class="editor-toolbar">
                    <div class="editor-title">Quick Execute</div>
                    <div class="editor-actions">
                        <button class="btn btn-primary" id="quick-execute">
                            <i class="fas fa-play"></i> Execute
                        </button>
                    </div>
                </div>
                <textarea class="code-editor" id="quick-editor" placeholder="-- Write your Lua script here...&#10;print('Hello, Lua!')"></textarea>
                <div class="output-container">
                    <div class="output-title">Output</div>
                    <div class="output-content" id="quick-output">> Ready to execute scripts...</div>
                </div>
            </div>

            <div class="header">
                <div class="page-title">
                    <h2>Your Whitelist Status</h2>
                </div>
                <button class="btn btn-secondary" id="check-whitelist">
                    <i class="fas fa-sync-alt"></i> Refresh
                </button>
            </div>

            <div class="executor-container" id="whitelist-status-container">
                <div class="output-container">
                    <div class="output-title">Whitelist Information</div>
                    <div class="output-content" id="whitelist-status">
                        > Connect to check your whitelist status
                    </div>
                </div>
            </div>
        </div>

        <!-- Game Logs Tab -->
        <div class="tab-content" id="game-logs-tab">
            <div class="header">
                <div class="page-title">
                    <h2>Recent Game Logs</h2>
                </div>
                <button class="btn btn-secondary" id="refresh-logs">
                    <i class="fas fa-sync-alt"></i> Refresh
                </button>
            </div>

            <div class="executor-container">
                <div class="tabs">
                    <div class="tab active" data-log-type="all">All Logs</div>
                    <div class="tab" data-log-type="executions">Executions</div>
                    <div class="tab" data-log-type="errors">Errors</div>
                    <div class="tab" data-log-type="connections">Connections</div>
                </div>

                <div id="logs-container">
                    <div class="log-entry">
                        <div class="log-header">
                            <div class="log-title">System Initialized</div>
                            <div class="log-time">Just now</div>
                        </div>
                        <div class="log-content">
                            Lua executor system ready. Waiting for connection...
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Scripthub Tab -->
        <div class="tab-content" id="scripthub-tab">
            <div class="header">
                <div class="page-title">
                    <h2>Script Hub</h2>
                </div>
                <div>
                    <button class="btn btn-secondary" id="refresh-scripts">
                        <i class="fas fa-sync-alt"></i> Refresh
                    </button>
                    <button class="btn btn-primary" style="margin-left: 10px;" id="load-script">
                        <i class="fas fa-download"></i> Load Script
                    </button>
                </div>
            </div>

            <div class="scripts-container" id="scripts-container">
                <!-- Scripts will be loaded here -->
            </div>
        </div>

        <!-- Executor Tab -->
        <div class="tab-content" id="executor-tab">
            <div class="executor-container">
                <div class="editor-toolbar">
                    <div class="editor-title">Lua Executor</div>
                    <div class="editor-actions">
                        <button class="btn btn-secondary" id="clear-editor">
                            <i class="fas fa-trash"></i> Clear
                        </button>
                        <button class="btn btn-secondary" id="save-script">
                            <i class="fas fa-save"></i> Save
                        </button>
                        <button class="btn btn-primary" id="execute-script">
                            <i class="fas fa-play"></i> Execute
                        </button>
                    </div>
                </div>
                <textarea class="code-editor" id="main-editor" placeholder="-- Write your Lua script here...&#10;print('Hello, Lua!')"></textarea>
                <div class="output-container">
                    <div class="output-title">Output</div>
                    <div class="output-content" id="main-output">> Ready to execute scripts...</div>
                </div>
            </div>
        </div>
    </main>

    <!-- Whitelist Modal -->
    <div class="modal" id="whitelist-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Whitelist Information</h3>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="whitelist-info">
                    <p><strong>Username:</strong> <span id="modal-username"></span></p>
                    <p><strong>Discord ID:</strong> <span id="modal-discord"></span></p>
                    <p><strong>Whitelist Level:</strong> <span id="modal-whitelist"></span></p>
                </div>
                <p style="font-size: 14px; color: rgba(255, 255, 255, 0.7);">
                    Your whitelist level determines which scripts you can access. 
                    Contact support if you believe there's an error.
                </p>
            </div>
            <div style="text-align: right;">
                <button class="btn btn-primary" id="close-modal-btn">Close</button>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let currentUser = null;
        let whitelistData = [];
        let scriptsData = [];
        let isConnected = false;

        // DOM Elements
        const tabContents = document.querySelectorAll('.tab-content');
        const navLinks = document.querySelectorAll('.nav-link');
        const usernameInput = document.getElementById('username');
        const discordIdInput = document.getElementById('discord-id');
        const connectBtn = document.getElementById('connect-btn');
        const disconnectBtn = document.getElementById('disconnect-btn');
        const statusIndicator = document.getElementById('status-indicator');
        const statusText = document.getElementById('status-text');
        const usernameDisplay = document.getElementById('username-display');
        const whitelistStatus = document.getElementById('whitelist-status');
        const checkWhitelistBtn = document.getElementById('check-whitelist');
        const scriptsContainer = document.getElementById('scripts-container');
        const refreshScriptsBtn = document.getElementById('refresh-scripts');
        const loadScriptBtn = document.getElementById('load-script');
        const mainEditor = document.getElementById('main-editor');
        const quickEditor = document.getElementById('quick-editor');
        const mainOutput = document.getElementById('main-output');
        const quickOutput = document.getElementById('quick-output');
        const executeScriptBtn = document.getElementById('execute-script');
        const quickExecuteBtn = document.getElementById('quick-execute');
        const clearEditorBtn = document.getElementById('clear-editor');
        const saveScriptBtn = document.getElementById('save-script');
        const whitelistModal = document.getElementById('whitelist-modal');
        const closeModalBtn = document.getElementById('close-modal-btn');
        const closeModalX = document.querySelector('.close-modal');
        const modalUsername = document.getElementById('modal-username');
        const modalDiscord = document.getElementById('modal-discord');
        const modalWhitelist = document.getElementById('modal-whitelist');
        const logsContainer = document.getElementById('logs-container');
        const refreshLogsBtn = document.getElementById('refresh-logs');
        const logTabs = document.querySelectorAll('.tab[data-log-type]');

        // Tab switching
        navLinks.forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const tabId = this.getAttribute('data-tab');
                
                // Update active nav item
                navLinks.forEach(l => l.classList.remove('active'));
                document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
                this.classList.add('active');
                this.parentElement.classList.add('active');
                
                // Update page title
                const pageTitle = this.querySelector('span').textContent;
                document.querySelector('.page-title h2').textContent = pageTitle;
                
                // Show corresponding tab
                tabContents.forEach(tab => tab.classList.remove('active'));
                document.getElementById(`${tabId}-tab`).classList.add('active');
            });
        });

        // Log tabs
        logTabs.forEach(tab => {
            tab.addEventListener('click', function() {
                logTabs.forEach(t => t.classList.remove('active'));
                this.classList.add('active');
                // In a real app, you would filter logs here
            });
        });

        // Connection system
        async function fetchWhitelistData() {
            try {
                const response = await fetch('https://raw.githubusercontent.com/RelaxxxX-Lab/Lua-things/refs/heads/main/Whitelist.json');
                whitelistData = await response.json();
                addLog('Whitelist data loaded successfully', 'system');
            } catch (error) {
                addLog(`Failed to load whitelist data: ${error.message}`, 'error');
            }
        }

        async function fetchScriptsData() {
            try {
                const response = await fetch('https://raw.githubusercontent.com/RelaxxxX-Lab/Lua-things/refs/heads/main/Scripts.json');
                scriptsData = await response.json();
                addLog('Scripts data loaded successfully', 'system');
                renderScripts();
            } catch (error) {
                addLog(`Failed to load scripts data: ${error.message}`, 'error');
            }
        }

        function connectUser() {
            const username = usernameInput.value.trim();
            const discordId = discordIdInput.value.trim();
            
            if (!username || !discordId) {
                addLog('Please enter both username and Discord ID', 'error');
                return;
            }
            
            // Check whitelist
            const userData = whitelistData.find(user => 
                user.User.toLowerCase() === username.toLowerCase() && 
                user.Discord === discordId
            );
            
            if (!userData) {
                addLog('User not found in whitelist', 'error');
                return;
            }
            
            currentUser = {
                username,
                discordId,
                whitelist: userData.Whitelist
            };
            
            isConnected = true;
            updateConnectionStatus();
            addLog(`User ${username} connected successfully (${userData.Whitelist} access)`, 'connection');
            
            // Update UI
            usernameDisplay.textContent = username;
            whitelistStatus.innerHTML = `> Welcome, <strong>${username}</strong>!<br>> Whitelist level: <strong style="color: ${getWhitelistColor(userData.Whitelist)}">${userData.Whitelist}</strong>`;
        }

        function disconnectUser() {
            addLog(`User ${currentUser.username} disconnected`, 'connection');
            currentUser = null;
            isConnected = false;
            updateConnectionStatus();
            usernameDisplay.textContent = 'Not Connected';
            whitelistStatus.textContent = '> Connect to check your whitelist status';
        }

        function updateConnectionStatus() {
            if (isConnected) {
                statusIndicator.className = 'status-indicator connected';
                statusText.textContent = `Connected as ${currentUser.username}`;
                connectBtn.style.display = 'none';
                disconnectBtn.style.display = 'block';
            } else {
                statusIndicator.className = 'status-indicator';
                statusText.textContent = 'Disconnected';
                connectBtn.style.display = 'block';
                disconnectBtn.style.display = 'none';
            }
        }

        function getWhitelistColor(level) {
            switch(level) {
                case 'Ultimate': return '#6e45e2';
                case 'Premium': return '#88d3ce';
                default: return '#f0f0f0';
            }
        }

        // Script system
        function renderScripts() {
            scriptsContainer.innerHTML = '';
            
            if (!scriptsData.length) {
                scriptsContainer.innerHTML = '<p>No scripts available</p>';
                return;
            }
            
            scriptsData.forEach(script => {
                const isPremiumPlus = script.Name.includes('(Premium+)');
                const card = document.createElement('div');
                card.className = 'script-card';
                
                if (isPremiumPlus) {
                    card.innerHTML = `
                        <div class="script-badge">Premium+</div>
                        <div class="script-title">${script.Name.replace(' (Premium+)', '')}</div>
                        <div class="script-desc">Premium script requiring Ultimate or Premium+ whitelist</div>
                        <div class="script-footer">
                            <div class="script-author">
                                <img src="https://cdn.discordapp.com/avatars/1207688714818429069/a_7c3a5e5e5e5e5e5e5e5e5e5e5e5e5e5?size=1024" alt="Author">
                                <span>RelaxxxX-Lab</span>
                            </div>
                            <button class="btn btn-primary" style="padding: 5px 10px; font-size: 12px;" data-script='${encodeURIComponent(script.Script)}'>
                                <i class="fas fa-download"></i> Get
                            </button>
                        </div>
                    `;
                } else {
                    card.innerHTML = `
                        <div class="script-title">${script.Name}</div>
                        <div class="script-desc">Standard script available to all whitelisted users</div>
                        <div class="script-footer">
                            <div class="script-author">
                                <img src="https://cdn.discordapp.com/avatars/1207688714818429069/a_7c3a5e5e5e5e5e5e5e5e5e5e5e5e5?size=1024" alt="Author">
                                <span>RelaxxxX-Lab</span>
                            </div>
                            <button class="btn btn-primary" style="padding: 5px 10px; font-size: 12px;" data-script='${encodeURIComponent(script.Script)}'>
                                <i class="fas fa-download"></i> Get
                            </button>
                        </div>
                    `;
                }
                
                scriptsContainer.appendChild(card);
            });
            
            // Add event listeners to script buttons
            document.querySelectorAll('[data-script]').forEach(btn => {
                btn.addEventListener('click', function() {
                    if (!isConnected) {
                        addLog('You must be connected to load scripts', 'error');
                        return;
                    }
                    
                    const script = decodeURIComponent(this.getAttribute('data-script'));
                    const scriptName = this.closest('.script-card').querySelector('.script-title').textContent;
                    
                    if (scriptName.includes('(Premium+)') && currentUser.whitelist !== 'Ultimate' && currentUser.whitelist !== 'Premium') {
                        addLog('This script requires Premium+ whitelist', 'error');
                        return;
                    }
                    
                    // Replace 'Username' with actual username in the script
                    const finalScript = script.replace(/Username/g, currentUser.username);
                    
                    // Load into main editor
                    mainEditor.value = finalScript;
                    addLog(`Script "${scriptName}" loaded into editor`, 'system');
                    
                    // Switch to executor tab
                    document.querySelector('[data-tab="executor"]').click();
                });
            });
        }

        // Execution system
        function executeScript(editor, outputElement) {
            if (!isConnected) {
                addLog('You must be connected to execute scripts', 'error', outputElement);
                return;
            }
            
            const code = editor.value.trim();
            if (!code) {
                addLog('Please enter some code to execute', 'error', outputElement);
                return;
            }
            
            addLog('Executing script...', 'system', outputElement);
            
            // Simulate execution (in a real app, this would communicate with your backend)
            setTimeout(() => {
                try {
                    // This is just a simulation - in a real app you'd need proper Lua execution
                    if (code.includes('print(')) {
                        const matches = code.match(/print\(([^)]+)\)/g);
                        if (matches) {
                            matches.forEach(match => {
                                const content = match.replace(/print\((['"]?)(.*?)\1\)/, '$2');
                                addLog(`> ${content}`, 'execution', outputElement);
                            });
                        } else {
                            addLog('> Script executed successfully (simulated)', 'execution', outputElement);
                        }
                    } else {
                        addLog('> Script executed successfully (simulated)', 'execution', outputElement);
                    }
                } catch (e) {
                    addLog(`> Error: ${e.message}`, 'error', outputElement);
                }
            }, 1000);
        }

        // Logging system
        function addLog(message, type = 'system', outputElement = null) {
            const logTypes = {
                'system': { color: '#6e45e2', title: 'System' },
                'error': { color: '#e63946', title: 'Error' },
                'execution': { color: '#2a9d8f', title: 'Execution' },
                'connection': { color: '#f4a261', title: 'Connection' }
            };
            
            const logType = logTypes[type] || logTypes.system;
            const timestamp = new Date().toLocaleTimeString();
            
            // Add to game logs
            const logEntry = document.createElement('div');
            logEntry.className = 'log-entry';
            logEntry.style.borderLeftColor = logType.color;
            logEntry.innerHTML = `
                <div class="log-header">
                    <div class="log-title">${logType.title}</div>
                    <div class="log-time">${timestamp}</div>
                </div>
                <div class="log-content">${message}</div>
            `;
            logsContainer.prepend(logEntry);
            
            // Add to output if specified
            if (outputElement) {
                const currentContent = outputElement.innerHTML;
                outputElement.innerHTML = `${currentContent}\n> [${timestamp}] ${message}`;
                outputElement.scrollTop = outputElement.scrollHeight;
            }
        }

        // Event listeners
        connectBtn.addEventListener('click', connectUser);
        disconnectBtn.addEventListener('click', disconnectUser);
        checkWhitelistBtn.addEventListener('click', () => {
            if (!isConnected) {
                addLog('You must be connected to check whitelist', 'error');
                return;
            }
            
            modalUsername.textContent = currentUser.username;
            modalDiscord.textContent = currentUser.discordId;
            modalWhitelist.textContent = currentUser.whitelist;
            modalWhitelist.style.color = getWhitelistColor(currentUser.whitelist);
            whitelistModal.style.display = 'flex';
        });
        refreshScriptsBtn.addEventListener('click', fetchScriptsData);
        loadScriptBtn.addEventListener('click', () => {
            if (!isConnected) {
                addLog('You must be connected to load scripts', 'error');
                return;
            }
            document.querySelector('[data-tab="scripthub"]').click();
        });
        executeScriptBtn.addEventListener('click', () => executeScript(mainEditor, mainOutput));
        quickExecuteBtn.addEventListener('click', () => executeScript(quickEditor, quickOutput));
        clearEditorBtn.addEventListener('click', () => {
            mainEditor.value = '';
            addLog('Editor cleared', 'system');
        });
        saveScriptBtn.addEventListener('click', () => {
            if (!mainEditor.value.trim()) {
                addLog('No code to save', 'error');
                return;
            }
            addLog('Script saved locally (simulated)', 'system');
            // In a real app, this would save to localStorage or backend
        });
        closeModalBtn.addEventListener('click', () => {
            whitelistModal.style.display = 'none';
        });
        closeModalX.addEventListener('click', () => {
            whitelistModal.style.display = 'none';
        });
        refreshLogsBtn.addEventListener('click', () => {
            addLog('Logs refreshed', 'system');
        });

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            fetchWhitelistData();
            fetchScriptsData();
            addLog('System initialized', 'system');
        });
    </script>
</body>
</html>
